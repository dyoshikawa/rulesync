---
root: false
targets: ["*"]
description: "Gemini CLI Coding Assistant の .aiexclude ファイルに関する仕様書"
globs: ["**/.aiexclude", "**/.gitignore"]
---

# Gemini CLI Coding Assistant Ignore ファイル仕様

## ファイルの配置場所とファイル名

### 対応するIgnoreファイル

#### 1. `.aiexclude`（推奨）
- **配置場所**: プロジェクト内の任意のディレクトリ
- **効果範囲**: そのディレクトリ自身と配下ディレクトリに作用
- **複数配置**: 可能（探索開始ディレクトリからルートへ向かって上位をマージ）
- **優先順位**: 下位（より深い階層）の設定が優先

#### 2. `.gitignore`（プレビュー機能）
- **配置場所**: ルート作業フォルダ（Gemini CLIを起動した場所）のみ
- **制限**: サブディレクトリの`.gitignore`は無視される
- **設定**: "Context Exclusion Gitignore"で有効/無効を切替可能

### 優先順位ルール
- 同じファイルで衝突した場合、`.aiexclude`が`.gitignore`に優先

## ファイル内容の仕様

### 基本構文（`.gitignore`と同一）
- 空行は無視
- `#`で始まる行はコメント
- 1行1パターンで対象パスを指定

### ワイルドカードとパターン
- `*` : 区切り文字（`/`以外）を任意長でマッチ
- `**` : `/`をまたいで任意深さにマッチ
- `?` : 任意の1文字
- `先頭/` : `.aiexclude`を置いたディレクトリを起点に絶対指定
- `末尾/` : ディレクトリ全体を指定
- `先頭!` : 否定（除外解除）

### 基本例
```
# 秘密鍵やAPIキー
apikeys.txt
*.key
/secret.env

# ディレクトリ丸ごと
my/sensitive/dir/

# 否定パターン（環境により動作が異なる可能性あり）
foo/*
!foo/README.md
```

### 注意事項：否定パターン
- Firebase Studio/IDXでは否定パターン（`!`）非対応
- Gemini Code Assist本家では対応
- CLI環境では要テスト確認

## 特殊なケース

### 空の`.aiexclude`
- Firebase Studio/IDX: `**/*`と同義（全てブロック）
- 否定パターンは使用不可

### VS Code拡張との連携
- Extensions > Gemini Code Assist > Context Exclusion Fileで設定カスタマイズ可能
- CLI は拡張側の設定を参照

## Gemini CLIでのワークフロー

### 基本手順
1. プロジェクトルートに`.gitignore`（任意）と`.aiexclude`（推奨）を配置
2. 必要に応じてサブディレクトリに追加の`.aiexclude`を配置
3. CLI実行時はカレントディレクトリを「プロジェクトルート」に設定
4. 除外設定の確認（将来のプレビュー版で診断コマンド追加予定）

### 診断コマンド（予定）
```bash
# プレビュー版 v0.2以降で追加予定
gemini context list-excluded
```

## ベストプラクティス

### セキュリティ重視
- APIキーや秘密鍵、社内コードは最上位の`.aiexclude`で管理
- 「絶対にモデルに渡したくない」ものを明確に除外

### パフォーマンス最適化
- ライブラリ・生成コード・ビルド成果物は`.gitignore`にも記載
- GitとGeminiの両方で管理を統一

### 複雑なルール管理
- 「広くブロック → 必要なものだけ `!` で戻す」パターンを採用
- ただし否定パターンの動作確認が必要

### セーフティファースト
- 迷うファイルは最初は除外
- 必要に応じて段階的に `!` で個別復帰

## バージョン情報
- 基盤: Gemini Code Assist
- 現在: CLI v0.1（手動確認のみ）
- 予定: v0.2以降で診断機能追加