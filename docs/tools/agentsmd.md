# AgentsMd Integration

## Overview

AgentsMd is a standardized format for AI agent instructions through `AGENTS.md` files. It provides a consistent structure for defining AI agent behavior and project-specific context across different AI development tools.

## File Structure

AgentsMd uses a two-level rule system for organizing AI agent instructions:

### Root Instructions (AGENTS.md)
- **Location**: `AGENTS.md` in project root
- **Purpose**: High-level project overview and primary agent instructions
- **Content**: Project description, core principles, and main guidance

### Detail Rules (.agents/memories/*.md)
- **Location**: `.agents/memories/` directory
- **Purpose**: Specific, categorized rules and detailed instructions
- **Organization**: Separate files for different aspects (coding standards, security guidelines, etc.)

## Generated Structure

When using rulesync with AgentsMd, the following structure is created:

```
├── AGENTS.md                    # Root-level project instructions
├── .agents/memories/            # Directory for detail rules
│   ├── coding-standards.md      # Coding conventions and standards
│   ├── security-guidelines.md   # Security practices and requirements
│   ├── testing-approach.md      # Testing strategies and patterns
│   └── [other-rules].md         # Additional categorized rules
```

## Configuration

rulesync generates AgentsMd configurations from your unified rules:

### Generation Command
```bash
# Generate AgentsMd configuration only
npx rulesync generate --agentsmd

# Generate all tools including AgentsMd
npx rulesync generate --all
```

### Import Command
```bash
# Import existing AgentsMd configuration
npx rulesync import --agentsmd
```

## Rule Mapping

### Root Rule → AGENTS.md
The root rule (with `root: true`) becomes the main `AGENTS.md` file:

```yaml
---
root: true
targets: ["agentsmd"]
description: "Project overview and main instructions"
---

# Project Name

## Overview
Brief description of the project and its purpose.

## Core Principles
- Principle 1
- Principle 2
- Principle 3

## Agent Instructions
Primary guidance for AI agents working on this project.
```

### Detail Rules → Memory Files
Non-root rules become individual files in `.agents/memories/`:

```yaml
---
root: false
targets: ["agentsmd"]
description: "Coding standards and conventions"
---

# Coding Standards

## Language Preferences
- Use TypeScript for new development
- Follow ESLint configuration
- Maintain consistent formatting

## Architecture Patterns
- Clean architecture principles
- Dependency injection
- Proper error handling
```

## Features

### Standardized Format
- Consistent structure across projects
- Clear separation of concerns
- Organized memory system

### Cross-Tool Compatibility
- Works with multiple AI development tools
- Maintains compatibility through rulesync generation
- Enables tool switching without reconfiguration

### Memory Organization
- Categorical organization of rules
- Easy maintenance and updates
- Clear rule discovery and application

## Best Practices

### File Organization
1. **Clear Naming**: Use descriptive names for memory files
2. **Logical Grouping**: Group related rules together
3. **Consistent Structure**: Maintain similar format across files
4. **Regular Updates**: Keep instructions current with project evolution

### Content Guidelines
1. **Specific Instructions**: Provide concrete, actionable guidance
2. **Context Awareness**: Include project-specific context
3. **Clear Language**: Use precise, unambiguous language
4. **Examples**: Include code examples where helpful

### Rule Management
1. **Single Source**: Use rulesync as the single source of truth
2. **Version Control**: Commit generated files for team consistency
3. **Regular Review**: Periodically review and update rules
4. **Team Alignment**: Ensure all team members understand the structure

## Integration with Other Tools

AgentsMd configurations generated by rulesync work alongside:

- GitHub Copilot Custom Instructions
- Cursor Project Rules
- Claude Code Memory
- Cline Rules
- And other supported AI development tools

## Example Configuration

### AGENTS.md (Root)
```markdown
# MyProject

## Overview
A modern web application built with React and TypeScript, focusing on user experience and performance.

## Core Principles
- Clean, maintainable code
- Test-driven development
- Security-first approach
- Performance optimization

## Agent Instructions
When working on this project:
1. Follow TypeScript strict mode
2. Write comprehensive tests
3. Prioritize security considerations
4. Optimize for performance
5. Maintain accessibility standards
```

### .agents/memories/coding-standards.md
```markdown
# Coding Standards

## TypeScript Guidelines
- Use strict type checking
- Prefer interfaces over types for object shapes
- Use meaningful variable names
- Include JSDoc comments for public APIs

## React Patterns
- Use functional components with hooks
- Implement proper error boundaries
- Follow component composition patterns
- Use React.memo for performance optimization

## Testing Requirements
- Unit tests for all business logic
- Component tests for UI interactions
- Integration tests for API endpoints
- Minimum 80% code coverage
```

### .agents/memories/security-guidelines.md
```markdown
# Security Guidelines

## Input Validation
- Validate all user inputs
- Sanitize data before processing
- Use parameterized queries
- Implement rate limiting

## Authentication & Authorization
- Use secure authentication methods
- Implement proper session management
- Apply principle of least privilege
- Regular security audits

## Data Protection
- Encrypt sensitive data
- Use environment variables for secrets
- Implement proper logging (without sensitive data)
- Follow OWASP guidelines
```

## Troubleshooting

### Common Issues

1. **Generation Issues**: Ensure your rules have proper frontmatter and valid targeting
2. **File Organization**: Check that the `.agents/memories/` directory structure is correct
3. **Content Validation**: Verify that all rule files have valid YAML frontmatter

### Debug Commands
```bash
# Validate your rules before generation
npx rulesync validate

# Generate with verbose output
npx rulesync generate --agentsmd --verbose

# Check project status
npx rulesync status
```

## Advanced Usage

### Custom Targeting
Target specific aspects or environments:

```yaml
---
root: false
targets: ["agentsmd"]
description: "Development environment specific rules"
globs: ["src/**/*.ts", "tests/**/*.ts"]
---
```

### Conditional Rules
Create rules that apply only in specific contexts:

```yaml
---
root: false
targets: ["agentsmd"]
description: "Production deployment guidelines"
globs: ["deploy/**/*", "scripts/**/*"]
---
```

## Migration

### From Existing AGENTS.md
If you already have an `AGENTS.md` file:

```bash
# Import existing configuration
npx rulesync import --agentsmd

# Review imported rules in .rulesync/
# Edit and organize as needed

# Generate updated configuration
npx rulesync generate --agentsmd
```

### To Other Tools
Convert AgentsMd rules to other AI tool formats:

```bash
# Generate for multiple tools
npx rulesync generate --agentsmd --cursor --claudecode

# Or generate for all supported tools
npx rulesync generate --all
```

This integration enables AgentsMd to work seamlessly with rulesync's unified rule management system while maintaining the standardized format for AI agent instructions.